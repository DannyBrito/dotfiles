# =============================================================================
# TMUX CONFIGURATION
# Enhanced configuration with detailed explanations
# =============================================================================

# -----------------------------------------------------------------------------
# PREFIX KEY CONFIGURATION
# -----------------------------------------------------------------------------
# Change the default prefix from Ctrl-b to Ctrl-s (easier to reach)
set -g prefix C-s
# Unbind the old prefix key
unbind C-b
# Send the prefix key through to applications when pressed twice
bind C-s send-prefix

# -----------------------------------------------------------------------------
# CONFIGURATION RELOAD
# -----------------------------------------------------------------------------
# Unbind default 'r' key and rebind it to reload the config file
unbind r
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# -----------------------------------------------------------------------------
# GENERAL SETTINGS
# -----------------------------------------------------------------------------
# Enable mouse support (click to select panes, resize panes, scroll)
set -g mouse on

# Set the base index for windows to 1 instead of 0 (easier to reach on keyboard)
set -g base-index 1
# Set the base index for panes to 1 instead of 0
setw -g pane-base-index 1

# Automatically renumber windows when one is deleted
set -g renumber-windows on

# Increase scrollback buffer size (default is 2000)
set -g history-limit 10000

# Set terminal to support 256 colors
set -g default-terminal "screen-256color"
# Enable true color support if terminal supports it
set -ga terminal-overrides ",xterm-256color:Tc"

# Reduce escape time for better responsiveness in vim/nvim
set -sg escape-time 0

# Allow automatic window renaming
setw -g automatic-rename on
# Set terminal title to show session name
set -g set-titles on
set -g set-titles-string '#S:#I:#P - #T'

# -----------------------------------------------------------------------------
# PANE NAVIGATION AND MANAGEMENT
# -----------------------------------------------------------------------------
# Split panes using | and - (more intuitive than % and ")
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
# Keep the default split keys too (% for vertical, " for horizontal)
# unbind '"'
# unbind %

# Create new window in current directory
bind c new-window -c "#{pane_current_path}"

# Switch panes using Alt-arrow keys (no prefix needed)
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Resize panes using Prefix + Shift + arrow keys (holdable with fast repeat)
bind -r H resize-pane -L 2
bind -r J resize-pane -D 1
bind -r K resize-pane -U 1
bind -r L resize-pane -R 2

# Standard tmux resize with Ctrl + Arrow keys (holdable with fast repeat)
bind -r C-Left resize-pane -L 1
bind -r C-Down resize-pane -D 1
bind -r C-Up resize-pane -U 1
bind -r C-Right resize-pane -R 1

# Set repeat time for holdable keys (how long you can hold without re-pressing prefix)
set -g repeat-time 1000

# Alternative: Mouse drag to resize (already enabled with mouse support above)

# -----------------------------------------------------------------------------
# COPY MODE AND SCROLLING
# -----------------------------------------------------------------------------
# Enter copy mode with Prefix + [
bind [ copy-mode
# Paste with Prefix + ]
bind ] paste-buffer

# -----------------------------------------------------------------------------
# WINDOW MANAGEMENT
# -----------------------------------------------------------------------------
# Move windows left/right with Prefix + < and >
bind -r < swap-window -t -1 \; previous-window
bind -r > swap-window -t +1 \; next-window

# -----------------------------------------------------------------------------
# SESSION MANAGEMENT
# -----------------------------------------------------------------------------
# Quick session switching
bind S choose-session
# Create new session
bind N new-session

# -----------------------------------------------------------------------------
# APPEARANCE AND STATUS BAR
# -----------------------------------------------------------------------------
# Status bar position (top or bottom)
set -g status-position bottom

# Status bar colors and styling
set -g status-bg colour235
set -g status-fg colour255
set -g status-left-length 40
set -g status-right-length 100

# Left side of status bar: session name and window info
set -g status-left "#[fg=colour46,bg=colour235,bold] #S #[fg=colour235,bg=colour240,nobold]#[fg=colour255,bg=colour240] #I:#P "

# Right side of status bar: date, time, and system info
set -g status-right "#[fg=colour240,bg=colour235]#[fg=colour255,bg=colour240] %Y-%m-%d #[fg=colour255,bg=colour240]#[fg=colour255,bg=colour240,bold] %H:%M #[fg=colour46,bg=colour240]#[fg=colour235,bg=colour46,bold] #h "

# Window status format
setw -g window-status-format "#[fg=colour255,bg=colour235] #I:#W "
setw -g window-status-current-format "#[fg=colour235,bg=colour46,bold] #I:#W #[fg=colour46,bg=colour235,nobold]"

# Pane border colors
set -g pane-border-style fg=colour240
set -g pane-active-border-style fg=colour46

# Message styling (when you see "Config reloaded!" etc.)
set -g message-style fg=colour255,bg=colour235,bold
set -g message-command-style fg=colour255,bg=colour235,bold

# Copy mode highlighting
setw -g mode-style fg=colour235,bg=colour46,bold

# -----------------------------------------------------------------------------
# ACTIVITY AND ALERTS
# -----------------------------------------------------------------------------
# Highlight windows with activity
setw -g monitor-activity on
# Don't display activity messages
set -g visual-activity off
# Bell styling
set -g visual-bell off
set -g bell-action none

# -----------------------------------------------------------------------------
# PLUGINS (TPM - Tmux Plugin Manager)
# -----------------------------------------------------------------------------
# List of plugins (install TPM first with: git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm)
# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-resurrect'
# set -g @plugin 'tmux-plugins/tmux-continuum'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
# run '~/.tmux/plugins/tpm/tpm'

# -----------------------------------------------------------------------------
# CUSTOM COMMANDS AND SHORTCUTS
# -----------------------------------------------------------------------------
# Kill session with confirmation
bind X confirm-before -p "kill-session #S? (y/n)" kill-session

# Clear history and screen
bind C-l send-keys C-l \; clear-history

# Toggle synchronize-panes (send commands to all panes)
bind e setw synchronize-panes

# -----------------------------------------------------------------------------
# QUICK REFERENCE
# -----------------------------------------------------------------------------
# Prefix: Ctrl-s
#
# Windows:
#   c         - Create new window
#   ,         - Rename window
#   n/p       - Next/Previous window
#   0-9       - Go to window number
#   &         - Kill window
#
# Panes:
#   |         - Split vertically
#   -         - Split horizontally
#   %         - Split vertically (default)
#   "         - Split horizontally (default)
#   Alt+Arrow - Navigate panes (no prefix)
#   H,J,K,L   - Resize panes (big steps)
#   Ctrl+Arrow- Resize panes (small steps)
#   Mouse     - Click and drag borders to resize
#   x         - Kill pane
#   z         - Zoom pane
#
# Sessions:
#   S         - Choose session
#   N         - New session
#   d         - Detach session
#   X         - Kill session (with confirmation)
#
# Other:
#   r         - Reload config
#   [         - Enter copy mode
#   ]         - Paste from buffer
#   e         - Toggle synchronize panes
#   ?         - Show all keybindings